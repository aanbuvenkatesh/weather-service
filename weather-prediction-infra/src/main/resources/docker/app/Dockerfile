ARG APP_BASE_IMAGE
FROM ${APP_BASE_IMAGE}

ARG APP_ARTIFACT_ID
ARG JAVA_OPTIONS

ENV ARTIFACT_ID ${APP_ARTIFACT_ID}
ENV JAVA_OPTS ${JAVA_OPTIONS}
ENV WEATHER_APP_HOME /opt/weather

COPY ${ARTIFACT_ID} ${WEATHER_APP_HOME}/${ARTIFACT_ID}

WORKDIR ${WEATHER_APP_HOME}

ENTRYPOINT ["sh", "-c"]
CMD ["java -jar ${ARTIFACT_ID}"]